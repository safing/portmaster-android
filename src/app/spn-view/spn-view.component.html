<ion-card>
  <ion-card-header>
    <ion-card-title *ngIf="User?.canUseSPN">SPN {{SPNStatus?.Status}}</ion-card-title>
    <ion-card-title *ngIf="!User?.canUseSPN" color="danger">Your account does not have access to the
      SPN</ion-card-title>
  </ion-card-header>

  <ion-card-content>
    <spn-button [SPNStatus]="SPNStatus" (onEnable)="enableSPN()" (onDisable)="disableSPN()"></spn-button>
    
    <div *ngIf="isSPNConnected()">
      Home: {{SPNStatus.HomeHubName}}
      <br>
      Connection: {{SPNStatus.ConnectedIP}} {{SPNStatus.ConnectedTransport}}
      <br>
      Connected Since: {{SPNStatus.ConnectedSince | date:'medium'}}
    </div>
    <div *ngIf="SPNErrorMsg.length > 0">
      {{SPNErrorMsg}}
    </div>
  </ion-card-content>
</ion-card>


<ion-accordion-group [multiple]="true">
  <ion-accordion value="user">
    <ion-item slot="header">
      <ion-label>User: {{User.username}}</ion-label>
    </ion-item>
    <ion-label slot="content">
      <p class="ion-padding">
        {{User.current_plan.name}}
        <br>
        Subscription ends at {{User.subscription.ends_at | date:'medium'}}
        <ion-button size="small" color="secondary" (click)="updateUserInfo();">Refresh</ion-button>
      </p>
    </ion-label>
  </ion-accordion>
  <ion-accordion value="device">
    <ion-item slot="header">
      <ion-label>Device: {{User.device.name}}</ion-label>
    </ion-item>
    <ion-label slot="content">
      <p class="ion-padding">{{User.device.id}}</p>
    </ion-label>
  </ion-accordion>
</ion-accordion-group>